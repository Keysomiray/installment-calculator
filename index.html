<!DOCTYPE html>
<html lang="ru"> 
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Калькулятор рассрочки</title>

<style>
:root {
  --green-1: #0a5a33;
  --green-2: #0c6b3c;
  --green-3: #0e7843;
  --white: #ffffff;
  --glass: rgba(255,255,255,0.12);
}

/* ===== BASE ===== efef*/
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg, var(--green-3), var(--green-1));
  color: var(--white);
}

/* Центровка для десктопа */
.page {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

/* Контейнер */
.container {
  width: 100%;
  max-width: 420px;
  padding: 16px;
}

/* ===== CARD ===== */
.card {
  background: transparent;
  border-radius: 24px;
  padding: 18px;
}

/* ===== HEADER ===== */
.header {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 22px;
}

.header img {
  width: 44px;
  height: 44px;
}

.header h2 {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
}

/* ===== FORM ===== */
label {
  display: block;
  margin-top: 16px;
  font-size: 14px;
  opacity: 0.9;
}

input, select {
  width: 100%;
  padding: 12px 14px;
  margin-top: 6px;
  border-radius: 14px;
  border: 2px solid rgba(255,255,255,0.35);
  background: transparent;
  color: var(--white);
  font-size: 16px;
}

input::placeholder {
  color: rgba(255,255,255,0.7);
}

select option {
  color: #000;
}

input[type=range] {
  padding: 0;
}

.range-label {
  font-size: 13px;
  margin-top: 6px;
  opacity: 0.85;
}

/* ===== RESULT ===== */
.result {
  margin-top: 20px;
  background: var(--glass);
  padding: 16px;
  border-radius: 18px;
}

.result div {
  margin-bottom: 8px;
  font-size: 15px;
}

small {
  font-size: 12px;
  opacity: 0.8;
}

/* ===== BUTTON ===== */
.button {
  margin-top: 22px;
  width: 100%;
  padding: 15px;
  border-radius: 18px;
  border: 2px solid #fff;
  background: transparent;
  color: #fff;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
}

/* ===== DESKTOP ADAPTATION ===== */
@media (min-width: 768px) {
  .container {
    max-width: 520px;
    padding: 32px;
  }

  .card {
    padding: 28px;
  }

  .header h2 {
    font-size: 22px;
  }

  .result div {
    font-size: 16px;
  }
}
</style>
</head>

<body>
<div class="page">
  <div class="container">
    <div class="card">

      <div class="header">
        <img src="logo.png" alt="Логотип">
        <h2>Товары в рассрочку</h2>
      </div>

      <label>Стоимость товара (₽)</label>
      <input type="number" id="price" value="40000" min="25000" max="80000">

      <label>Категория товара</label>
      <input type="range" id="category" min="1" max="2" step="1" value="1">
      <div class="range-label" id="categoryLabel">Телефоны</div>

      <label>Срок рассрочки</label>
      <select id="term">
        <option value="4">4 месяца</option>
        <option value="5">5 месяцев</option>
        <option value="6" selected>6 месяцев</option>
        <option value="7">7 месяцев</option>
        <option value="8">8 месяцев</option>
        <option value="9">9 месяцев</option>
        <option value="10">10 месяцев</option>
        <option value="11">11 месяцев</option>
        <option value="12">12 месяцев</option>
      </select>

      <label>Первоначальный взнос (%)</label>
      <input type="range" id="downPercent" min="0" max="50" value="20">
      <div class="range-label" id="downLabel">20%</div>

      <div class="result">
        <div id="downPay"></div>
        <div id="minDown"></div>
        <div id="markup"></div>
        <div id="monthly"></div>
        <div id="total"></div>
      </div>

      <button class="button">Оформить заявку</button>

    </div>
  </div>
</div>

<script>
// ===== ПРОЦЕНТЫ =====
const phonePricePercent = {
  4:0.1667,5:0.2083,6:0.25,7:0.2917,8:0.3333,9:0.375,
  10:0.4167,11:0.4583,12:0.5
};
const phoneRestPercent = {
  4:0.234,5:0.2747,6:0.3158,7:0.357,8:0.4,9:0.4426,
  10:0.4855,11:0.5285,12:0.5714
};
const allPricePercent = {
  4:0.1333,5:0.1667,6:0.2,7:0.2333,8:0.2583,9:0.2917,
  10:0.3167,11:0.33,12:0.35
};
const allRestPercent = {
  4:0.186,5:0.2353,6:0.2857,7:0.3373,8:0.3769,9:0.4308,
  10:0.472,11:0.4944,12:0.5283
};

function round100(v) {
  return Math.ceil(v / 100) * 100;
}

function calculate() {
  const price = Number(priceInput.value);
  const category = Number(categoryInput.value);
  const term = Number(termSelect.value);
  const downPercent = Number(downInput.value);

  const basePrice = price + 1000;
  const downPayment = basePrice * downPercent / 100;

  const priceP = category === 1 ? phonePricePercent : allPricePercent;
  const restP  = category === 1 ? phoneRestPercent  : allRestPercent;

  const minDown = (basePrice * priceP[term]) / term;
  const rest = basePrice - downPayment;

  let markup, type;
  if (downPayment >= minDown && downPayment > 0) {
    markup = basePrice * priceP[term];
    type = 'процент на стоимость';
  } else {
    markup = rest * restP[term];
    type = 'процент на остаток';
  }

  const total = basePrice + markup;
  const monthly = (total - downPayment) / term;

  downPay.innerHTML = `Первоначальный взнос: <b>${round100(downPayment)} ₽</b>`;
  minDown.innerHTML = `Минимальный взнос: ${round100(minDown)} ₽`;
  markupDiv.innerHTML = `Наценка: <b>${round100(markup)} ₽</b><br><small>${type}</small>`;
  monthlyDiv.innerHTML = `Ежемесячный платёж: <b>${round100(monthly)} ₽</b>`;
  totalDiv.innerHTML = `Общая сумма: <b>${round100(total)} ₽</b>`;
}

// DOM
const priceInput = document.getElementById('price');
const categoryInput = document.getElementById('category');
const termSelect = document.getElementById('term');
const downInput = document.getElementById('downPercent');

const downPay = document.getElementById('downPay');
const minDown = document.getElementById('minDown');
const markupDiv = document.getElementById('markup');
const monthlyDiv = document.getElementById('monthly');
const totalDiv = document.getElementById('total');

document.querySelectorAll('input, select').forEach(el =>
  el.addEventListener('input', calculate)
);

downInput.addEventListener('input', e =>
  downLabel.innerText = e.target.value + '%'
);

categoryInput.addEventListener('input', e =>
  categoryLabel.innerText = e.target.value == 1 ? 'Телефоны' : 'Все товары'
);

calculate();
</script>
</body>
</html>

